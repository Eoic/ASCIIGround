(function(o,a){typeof exports=="object"&&typeof module<"u"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.ASCIIGround={}))})(this,function(o){"use strict";class a{permutation;constructor(t=0){this.permutation=this.generatePermutation(t)}generatePermutation(t){const i=[];for(let e=0;e<256;e++)i[e]=e;for(let e=255;e>0;e--){const n=Math.floor(t*(e+1)%(e+1));[i[e],i[n]]=[i[n],i[e]],t=t*16807%2147483647}return[...i,...i]}fade(t){return t*t*t*(t*(t*6-15)+10)}lerp(t,i,e){return t+e*(i-t)}grad(t,i,e){const n=t&3,s=n<2?i:e,r=n<2?e:i;return((n&1)===0?s:-s)+((n&2)===0?r:-r)}noise(t,i){const e=Math.floor(t)&255,n=Math.floor(i)&255;t-=Math.floor(t),i-=Math.floor(i);const s=this.fade(t),r=this.fade(i),h=this.permutation[e]+n,u=this.permutation[h],m=this.permutation[h+1],c=this.permutation[e+1]+n,p=this.permutation[c],f=this.permutation[c+1];return this.lerp(this.lerp(this.grad(this.permutation[u],t,i),this.grad(this.permutation[p],t-1,i),s),this.lerp(this.grad(this.permutation[m],t,i-1),this.grad(this.permutation[f],t-1,i-1),s),r)}}class l{canvas;ctx;options;animationId=null;startTime=0;perlin;cols=0;rows=0;charWidth=0;charHeight=0;get isAnimating(){return this.animationId!==null}constructor(t,i){this.canvas=t;const e=t.getContext("2d");if(!e)throw new Error("Could not get 2D context from canvas.");this.ctx=e,this.options={pattern:i.pattern,characters:i.characters,speed:i.speed,fontSize:i.fontSize||12,fontFamily:i.fontFamily||"monospace",color:i.color||"#00ff00",backgroundColor:i.backgroundColor||"#000000",animated:i.animated!==void 0?i.animated:!0},this.perlin=new a,this.setupCanvas()}setupCanvas(){this.ctx.font=`${this.options.fontSize}px ${this.options.fontFamily}`,this.ctx.textBaseline="top";const t=this.ctx.measureText("M");this.charWidth=t.width,this.charHeight=this.options.fontSize,this.cols=Math.floor(this.canvas.width/this.charWidth),this.rows=Math.floor(this.canvas.height/this.charHeight)}getNoiseFunction(){switch(this.options.pattern){case"perlin":return(t,i,e)=>this.perlin.noise(t*.1,i*.1+e);case"wave":return(t,i,e)=>Math.sin(t*.1+e)*Math.cos(i*.1+e*.5);case"rain":return(t,i,e)=>Math.sin(i*.2+e*2)*Math.cos(t*.05);case"static":return()=>Math.random()*2-1;default:return()=>0}}render(t){this.ctx.fillStyle=this.options.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=this.options.color;const i=this.getNoiseFunction(),e=(t-this.startTime)*this.options.speed;for(let n=0;n<this.rows;n++)for(let s=0;s<this.cols;s++){const h=(i(s,n,e)+1)/2,u=Math.floor(h*this.options.characters.length),m=Math.max(0,Math.min(u,this.options.characters.length-1)),c=this.options.characters[m],p=s*this.charWidth,f=n*this.charHeight;this.ctx.fillText(c,p,f)}}start(){if(this.animationId!==null)return;this.startTime=performance.now();const t=i=>{this.render(i),this.animationId=requestAnimationFrame(t)};this.animationId=requestAnimationFrame(t)}stop(){this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null)}updateOptions(t){this.options={...this.options,...t},this.setupCanvas()}resize(t,i){this.canvas.width=t,this.canvas.height=i,this.setupCanvas()}}function g(d){const t=document.createElement("canvas");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.zIndex="-1",t.style.pointerEvents="none",t.width=window.innerWidth,t.height=window.innerHeight,document.body.appendChild(t);const i=new l(t,d),e=()=>{t.width=window.innerWidth,t.height=window.innerHeight,i.resize(t.width,t.height)};return window.addEventListener("resize",e),i}o.ASCIIGround=l,o.createFullPageBackground=g,o.default=l,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
